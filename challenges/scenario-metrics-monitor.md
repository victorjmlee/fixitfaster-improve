# 시나리오: 메트릭/모니터가 안 나오거나 알람이 이상함

**난이도:** ⭐⭐ Medium  
**예상 소요 시간:** 15~25분  
**관련 Datadog 제품:** Metrics, Monitors, Agent

---

## 증상 요약

- **Case 1:** 특정 메트릭이 Datadog에 안 들어오거나, 이전에 보이던 메트릭이 사라짐  
- **Case 2:** 모니터(알람)가 설정돼 있는데 알림이 오지 않거나, 반대로 잘못된 조건으로 자꾸 알림이 옴  

참가자 환경에서는 “정상일 때 보이던 메트릭/모니터”를 기준으로, 주최자가 망가뜨려 둔 상태에서 원인을 찾아 복구합니다.

---

## 환경

- **플랫폼:** 로컬 Docker (Datadog Agent), (선택) 메트릭을 보내는 앱
- **Agent:** Datadog Agent 7.x
- **기타:** 커스텀 메트릭 또는 기본 시스템 메트릭, 모니터 1~2개 (팀에서 지정)

---

## 재현 단계 / 관찰 가능한 현상

1. **메트릭:** Metrics Explorer 또는 대시보드에서 기대한 메트릭이 없거나 0만 나옴
2. **모니터:** Monitors에서 상태가 잘못됨(항상 Alert/No Data 등) 또는 알림이 안 옴
3. Agent는 떠 있고, 다른 제품(APM/Logs)은 정상일 수 있음

---

## 허용 리소스

- [x] Datadog 공식 문서 (Metrics, Monitors, Agent)
- [x] Help Center, Troubleshooting
- [ ] 내부 Wiki: (팀에서 지정)

---

## 제출 포맷 (참가자용)

- **원인 요약:**
- **해결 단계:**
- **참고한 문서/링크:**
- **소요 시간:**

---

## 주최자용: 망가뜨리는 방법 & 정답

**망가뜨리는 방법 (택 1):**

- **A. 메트릭:** Agent에서 메트릭 전송 비활성화 또는 잘못된 prefix/필터로 해당 메트릭이 안 나가게 함
- **B. 모니터:** 모니터 쿼리를 존재하지 않는 메트릭/잘못된 조건으로 변경
- **C. 모니터:** 알림 채널(이메일/슬랙)을 잘못된 값으로 바꿔서 알림이 안 가게 함

**정답 요약:**

- **A:** 메트릭 수집/전송 설정 복구, Agent 재시작
- **B:** 올바른 메트릭/조건으로 모니터 수정
- **C:** 알림 채널 복구, 모니터 저장

**관련 공식 문서:** Metrics, Monitors, Agent
